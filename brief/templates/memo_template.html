<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <style>
        /* Import Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=IBM+Plex+Sans:wght@400;600&display=swap');

        /* Page setup */
        @page {
            size: letter;
            margin: 72pt;
            @bottom-center {
                content: "Confidential | Prepared by Sago | Powered by Sentinel Labs";
                font-family: 'Arial', sans-serif;
                font-size: 9pt;
                color: #2b5845;
            }
            @bottom-right {
                content: "Page " counter(page);
                font-family: 'Arial', sans-serif;
                font-size: 9pt;
            }
        }

        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            font-size: 12pt;
            color: #1f1f1f;
            line-height: 1.15;
            max-width: 468pt;
            margin: 0 auto;
            padding: 0;
        }

        /* Memo header */
        .memo-header {
            margin-bottom: 24pt;
            padding-bottom: 12pt;
            border-bottom: 2pt solid #2b5845;
        }

        .memo-title {
            font-size: 24pt;
            color: #2b5845;
            font-weight: 600;
            margin: 0 0 8pt 0;
            font-family: 'Inter', sans-serif;
        }

        /* Section headers - clean styling for memos (no background box) */
        h2 {
            font-size: 16pt;
            color: #2b5845;
            font-weight: 600;
            margin: 16pt 0 8pt 0;
            padding-left: 0;
            font-family: 'Inter', sans-serif;
        }

        /* Legacy section-header styling for briefs (kept for compatibility) */
        .section-header {
            background-color: #f6efd8;
            border: 1pt solid #000000;
            padding: 5pt;
            margin: 24pt 0 12pt 0;
            page-break-inside: avoid;
        }

        .section-header h2 {
            font-size: 20pt;
            color: #2b5845;
            font-weight: 400;
            margin: 0;
            padding-left: 0;
            font-family: 'Inter', sans-serif;
        }

        /* Subsection headers */
        h3 {
            font-size: 16pt;
            color: #2b5845;
            font-weight: 400;
            margin: 16pt 0 8pt 0;
            font-family: 'Inter', sans-serif;
        }

        h4 {
            font-size: 14pt;
            color: #1f1f1f;
            font-weight: 600;
            margin: 12pt 0 6pt 0;
            font-family: 'Inter', sans-serif;
        }

        /* Body text */
        p {
            margin: 0 0 10pt 0;
            font-family: 'IBM Plex Sans', 'Inter', sans-serif;
        }

        /* Lists */
        ul, ol {
            margin: 0 0 10pt 0;
            padding-left: 36pt;
        }

        li {
            margin-bottom: 4pt;
            font-family: 'IBM Plex Sans', 'Inter', sans-serif;
        }

        /* Table styling - critical for wide tables */
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: auto;
            font-size: 11pt;
            margin: 12pt 0;
        }

        th, td {
            border: 1pt solid #1f1f1f;
            padding: 8pt 10pt;
            text-align: left;
            vertical-align: top;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            -webkit-hyphens: none;
        }

        th {
            background-color: #f6efd8;
            color: #2b5845;
            font-weight: 600;
        }

        /* Hide empty table cells and rows */
        th:empty,
        td:empty {
            padding: 0;
            border: none;
        }

        /* Two-column info tables */
        .info-table {
            width: 100%;
        }

        .info-table td:first-child {
            width: 35%;
            font-weight: 400;
        }

        .info-table td:last-child {
            width: 65%;
        }

        /* Flag styling */
        .red-flag {
            color: #cc0000;
            font-weight: 600;
        }

        .yellow-flag {
            color: #b7a200;
            font-weight: 600;
        }

        .flag-item {
            margin-bottom: 8pt;
        }

        .flag-item strong {
            font-weight: 700;
        }

        /* Links */
        a {
            color: #1155cc;
            text-decoration: underline;
        }

        /* Horizontal rule */
        hr {
            border: none;
            border-top: 1pt solid #1f1f1f;
            margin: 24pt 0;
        }

        /* Code/highlight blocks */
        code {
            background-color: #e8eaed;
            padding: 2pt 4pt;
            font-family: monospace;
            font-size: 10pt;
        }

        /* Print/PDF specific styles */
        @media print {
            table {
                page-break-inside: auto;
            }
            tr {
                page-break-inside: avoid;
                page-break-after: auto;
            }
            .section-header {
                page-break-after: avoid;
            }
            h2, h3, h4 {
                page-break-after: avoid;
            }
        }

        /* Confidence levels */
        .confidence-high {
            color: #2b5845;
            font-weight: 600;
        }

        .confidence-medium {
            color: #b7a200;
            font-weight: 600;
        }

        .confidence-low {
            color: #cc0000;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Memo header with entity name -->
    {% if display_title %}
    <div class="memo-header">
        <h1 class="memo-title">{{ display_title }}</h1>
    </div>
    {% endif %}
    
    <!-- Main content from markdown conversion -->
    {{ content | safe }}
</body>
</html>